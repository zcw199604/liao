# 为什么要做

当前仓库已具备较丰富的前后端测试用例，但仍存在以下问题，影响 CI/本地回归效率与对边界场景的覆盖：

- 前端 `vitest` 在 `jsdom` 环境下缺少必要的浏览器 API（如 `window.matchMedia`），导致部分用例无法稳定运行。
- 后端 Go 测试覆盖已能覆盖主路径，但在鉴权中间件、身份管理、系统管理、Forceout 管理、以及视频抽帧任务部分边界仍有缺口。
- 缺少对“失败注入/异常输入/安全边界”的系统性回归用例，容易在重构或依赖升级时出现回归。

本方案的目标是：让现有测试在默认开发环境下可稳定全绿，并补齐关键边界用例以降低回归风险。

