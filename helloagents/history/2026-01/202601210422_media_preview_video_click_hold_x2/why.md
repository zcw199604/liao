# 变更提案: MediaPreview 视频交互增强（单击播放/暂停、点击浮现三按钮、长按2倍速、滑动快进/音量、按钮美化）

## 需求背景
- 现状：`MediaPreview` 已引入 Plyr，支持基础控制栏、倍速选择、抓帧/抽帧。
- 痛点：
  1. 需要更快的“点一下就播放/暂停”的交互（不必精准点控件）。
  2. 需要“按住临时 2x 加速”便于快速浏览/定位片段。
  3. 底部“抓帧/抽帧”两个按钮视觉风格与整体不一致，显得突兀。

## 产品分析

### 目标用户与场景
- **用户群体:** 频繁在聊天/媒体库中预览视频的用户
- **使用场景:** 全屏预览中快速定位到想要的帧/片段，再抓帧或进入抽帧流程
- **核心痛点:** 操作步骤多、需要频繁移动到控制栏、按钮视觉干扰

### 价值主张与成功指标
- **价值主张:** 用“点一下/按住”完成高频操作，减少操作成本并提升沉浸感
- **成功指标:**
  - 单击视频区域可稳定切换播放/暂停（Plyr 与降级原生均可）。
  - 长按倍速区域可临时 2x 播放，松开恢复原倍速（不污染用户倍速偏好）。
  - 抓帧/抽帧按钮与整体玻璃态风格一致，视觉更轻量。

### 人文关怀
- 在移动端提供明确的可发现性提示（标题/提示文案），避免隐式手势带来困惑。
- 不改变既有的键盘/无障碍可用性（仍可通过控制栏完成所有操作）。

## 变更内容
1. 视频区域支持单击切换播放/暂停
2. 倍速控件支持长按临时 2x 播放，松开恢复原倍速
3. 单击后浮现“倒退/播放暂停/快进”三按钮，1 秒后自动隐藏
4. 视频区域支持手势：左右滑动快进/倒退，上下滑动调整音量
5. 优化底部“抓帧/抽帧”按钮样式，使其与预览界面一致

## 影响范围
- **模块:** 前端 Media 模块（MediaPreview）
- **文件:** `frontend/src/components/media/MediaPreview.vue`
- **API:** 无
- **数据:** 无

## 核心场景

### 需求: 单击播放/暂停
**模块:** Media
在视频预览中，用户单击视频画面区域即可切换播放/暂停。

#### 场景: 单击切换
进入 `MediaPreview` 视频预览后：
- 单击画面区域从播放→暂停或暂停→播放。
- 不影响控制栏按钮/进度条等交互。

### 需求: 长按临时2x倍速
**模块:** Media
在视频预览中，用户长按倍速控件触发临时 2x 加速，松开恢复原倍速。

#### 场景: 长按加速并恢复
进入 `MediaPreview` 视频预览并已设置任意倍速后：
- 长按超过阈值后，播放速度切换为 x2（临时）。
- 松开后恢复到用户选定的倍速（并保持本地持久化值不变化）。
- 若长按触发时视频处于暂停，可在按住期间自动播放；松开后恢复到原暂停状态（可配置）。

### 需求: 点击浮现三按钮（倒退/播放暂停/快进）
**模块:** Media
在视频预览中，用户单击视频画面区域后，浮现三枚大按钮便于快速控制：倒退、播放/暂停、快进，且 1 秒后自动隐藏。

#### 场景: 单击浮现并自动隐藏
进入 `MediaPreview` 视频预览后：
- 单击画面区域：三按钮浮现（可见且可点击）。
- 1 秒内无进一步交互：按钮自动隐藏。
- 任意交互（再次点击或点按按钮）：重置隐藏计时。

### 需求: 手势快进/倒退与音量调整
**模块:** Media
在视频预览中支持手势操作：
- 左右滑动：快速前进/倒退（seek）
- 上下滑动：快速调整音量（volume）

#### 场景: 手势控制
进入 `MediaPreview` 视频预览后：
- 在画面区域左右滑动可调整播放进度，幅度随滑动距离变化，并被限制在 `[0, duration]`。
- 在画面区域上下滑动可调整音量，范围 `[0, 1]`。
- 移动端（尤其 iOS）若浏览器限制脚本调音量，需降级处理（忽略或提示）。

### 需求: 抓帧抽帧按钮美化
**模块:** Media
底部抓帧/抽帧按钮改为轻量玻璃态风格，保持可读性与可点按区域。

#### 场景: 预览底部操作
进入 `MediaPreview` 视频预览后：
- 按钮视觉与顶部工具栏一致（透明背景、圆角、阴影、hover/focus 状态）。
- 禁用/加载态清晰可见。
